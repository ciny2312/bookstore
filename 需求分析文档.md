# 需求分析文档

## 1、用户系统

* 游客类：

  1. 账户注册：在用户数据库中创建一个新账户，并获得账户编码。

  2. 账户登录：向用户数据库输入账户编码，数据库返回对应账户。

* 顾客类（继承自游客）：

  1. 查询图书：向图书系统输入 ISBN 号、作者名字、关键字、书名等信息，数据库返回对应图书的类，若无对应图书或有多本对应图书，返回相应报错信息。

  2. 购买图书：向图书系统输入 ISBN 号和购买量，图书系统改变对应图书的库存量并返回图书单价，若库存量不足购买量，返回报错信息；向销售数据库输入ISBN号，购买量和单价。

* 销售人员（继承自顾客）：

  1. 进货：向图书系统输入ISBN号，进货量，图书系统改变对应图书的库存量；向采购数据库输入ISBN号，进货量和进货价格；向盈利数据库输入采购费用=进货量*进货价格；向工作日志输入此次操作类型、本人账户编码和全部进货信息。

  2. 图书信息录入：向图书系统输入ISBN号等全部信息，图书系统创建一本新的图书；向工作日志输入此次操作类型、本人账户编码和全部图书信息。

  3. 图书信息修改：向图书系统输入ISBN码以及要修改的信息；向工作日志输入此次操作类型、本人账户编码和全部图书信息。
  4.  用户创建：在用户数据库中创建一个新账户，并获得账户编码；向工作日志输入此次操作类型、本人账户编码和创建的用户信息。

* 店长（继承自销售）：

  1. 查询采购情况：读取采购数据库中相应时间段的信息并输出。
  2. 查询销售情况：读取销售数据库中相应时间段的信息并输出。
  3. 查询盈利情况：读取盈利数据库中相应时间段的信息，计算并输出收入、支出和利润。
  4. 查询员工工作情况：读取工作日志中相应员工的记录并输出。
  5. 查询全店工作日志：读取工作日志中全店的记录并输出。

## 2、图书系统

接收到顾客（包括销售人员、店长）的输入时，调用有关操作改变图书数据库的相关数据，在需要时返回相关值。

* 进货

* 销售

* 查询

* 图书信息录入

* 图书信息修改

  

## 3、图书数据库

基本信息：ISBN码、书名、作者、关键字、库存量、单价

## 4、工作日志

分为全店工作日志和各员工工作日志。

接收到销售人员（包括店长）的数据时，在全店工作日志末尾增加一条记录。在对应销售人员账户的工作日志末尾增加此次操作在全店工作日志的存储位置。

## 5、采购文档

接收到销售人员（包括店长）的数据时，在末尾增加一条采购信息。

## 6、销售文档

接收到顾客（包括销售人员、店长）的数据时，在末尾增加一条销售信息。

## 7、盈利文档

收到采购或销售信息时，在末尾记录此次的收入或支出。